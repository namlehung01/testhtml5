System.register("chunks:///_virtual/score-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,a,n,i,c,s,l,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createClass},function(e){i=e.cclegacy,c=e._decorator,s=e.Prefab,l=e.Node,f=e.Component}],execute:function(){var h,S,u,y,m,p,d,v,g;i._RF.push({},"0b7b79XwaxOKZnnKoCi16SX","score-manager",void 0);var I=c.ccclass,N=c.property,C=e("ScoreInfo",(function(){this.playerName="",this.timeResolve=0,this.moveCount=0}));e("default",(h=I("ScoreManager"),S=N(s),u=N(l),h((g=v=function(e){function r(){for(var r,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,t(r,"prefabScoreLine",p,a(r)),t(r,"contentNode",d,a(r)),r.arrayScoreInfo=[],r.saveScoreBoardName="Rubik_N_ScoreBoard",r.MAX_NUMBER_SAVE_SCORE=10,r}o(r,e);var i=r.prototype;return i.onLoad=function(){r._instance=this.node.getComponent("ScoreManager"),this.LoadScoreBoard()},i.start=function(){},i.onEnable=function(){this.UpdateScoreBoard()},i.UpdateScoreBoard=function(){if(this.prefabScoreLine&&this.contentNode)for(var e=this.contentNode.children.length,r=0;r<this.arrayScoreInfo.length;r++){var o=null,t=!1;r+1<e?o=this.contentNode.children[r+1]:(t=!0,o=cc.instantiate(this.prefabScoreLine));var a=o.getChildByName("name").getComponent("cc.Label");a.string=this.arrayScoreInfo[r].playerName,(a=o.getChildByName("time").getComponent("cc.Label")).string=""+this.arrayScoreInfo[r].timeResolve,(a=o.getChildByName("move-count").getComponent("cc.Label")).string=""+this.arrayScoreInfo[r].moveCount,o.name="score"+r,t&&this.contentNode.addChild(o)}},i.IsNewScore=function(e){for(var r=this.arrayScoreInfo.length,o=0;o<r&&!(this.arrayScoreInfo[o].timeResolve>e);o++);return o<this.MAX_NUMBER_SAVE_SCORE},i.AddNewScore=function(e){for(var r=!1,o=0,t=this.arrayScoreInfo.length;o<t&&!(this.arrayScoreInfo[o].timeResolve>e.timeResolve);o++);if(o<this.MAX_NUMBER_SAVE_SCORE)if(r=!0,o<t){var a=t-1,n=new C;for(n.timeResolve=this.arrayScoreInfo[a].timeResolve,n.moveCount=this.arrayScoreInfo[a].moveCount,n.playerName=this.arrayScoreInfo[a].playerName;a>o;a--)this.arrayScoreInfo[a].timeResolve=this.arrayScoreInfo[a-1].timeResolve,this.arrayScoreInfo[a].moveCount=this.arrayScoreInfo[a-1].moveCount,this.arrayScoreInfo[a].playerName=this.arrayScoreInfo[a-1].playerName;this.arrayScoreInfo[o].timeResolve=e.timeResolve,this.arrayScoreInfo[o].moveCount=e.moveCount,this.arrayScoreInfo[o].playerName=e.playerName,this.arrayScoreInfo.push(n)}else this.arrayScoreInfo.push(e);return!!r&&(this.SaveScoreBoard(),!0)},i.SaveScoreBoard=function(){cc.sys.localStorage.setItem(this.saveScoreBoardName,JSON.stringify(this.arrayScoreInfo))},i.LoadScoreBoard=function(){var e=cc.sys.localStorage.getItem(this.saveScoreBoardName);e&&e.length>0&&(this.arrayScoreInfo=JSON.parse(e))},n(r,null,[{key:"instance",get:function(){return r._instance}}]),r}(f),v._instance=null,p=r((m=g).prototype,"prefabScoreLine",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=r(m.prototype,"contentNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/touch-area.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ui-canvas.ts","./input-controller.ts"],(function(t){"use strict";var o,e,i,h,s,n,u,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,h=t.Size,s=t.Vec2,n=t.Component},function(t){u=t.default},function(t){c=t.default}],execute:function(){var r;e._RF.push({},"2f0cdXjIJFGVp3MEJXCPiPE","touch-area",void 0);var a=i.ccclass;i.property,t("TouchArea",a("TouchArea")(r=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(o=t.call.apply(t,[this].concat(i))||this).touchSize=new cc.Size,o.isEnableDebugTouch=!1,o.debugtouch=null,o.originalSize=new h(0,0),o.posTouchStart=new s(0,0),o.posTouchMove=new s(0,0),o.posTouchEnd=new s(0,0),o.bonusMove=[],o.indexBonusMove=-1,o.isTouchStart=!1,o.preMoveVecdirection=new s(0,0),o}o(e,t);var i=e.prototype;return i.onLoad=function(){var t=this.node.getComponent("cc.UITransform");t&&(this.originalSize.width=t.contentSize.width,this.originalSize.height=t.contentSize.height)},i.start=function(){if(this.touchSize.width=this.node.getScale().x*this.originalSize.width,this.touchSize.height=this.node.getScale().y*this.originalSize.height,this.debugtouch=this.node.getChildByName("debug-touch"),this.debugtouch){this.debugtouch.active=this.isEnableDebugTouch;var t=this.debugtouch.getComponent("DebugTouchsize");t.updateTouchDebug(this.originalSize);var o=this.node.getComponent("cc.UITransform").contentSize;t.SetText(this.node.name+" "+Math.floor(o.width)+" "+Math.floor(o.height))}},i.update=function(t){this.debugtouch&&this.isEnableDebugTouch&&(this.IsTouchStart()&&this.debugtouch.getComponent("DebugTouchsize").SetText(Math.floor(this.posTouchStart.x)+" "+Math.floor(this.posTouchStart.y)))},i.UpdateTouchSize=function(t){(this.touchSize.width=Math.floor(this.node.getScale().x*t.x*this.originalSize.width),this.touchSize.height=Math.floor(this.node.getScale().y*t.y*this.originalSize.height),this.debugtouch&&1==this.debugtouch.active)&&this.debugtouch.getComponent("DebugTouchsize").SetText(""+this.touchSize)},i.SetEnableDebugTouch=function(t){this.isEnableDebugTouch=t,this.debugtouch&&(this.debugtouch.active=this.isEnableDebugTouch)},i.GetPosTouchStart=function(){return this.posTouchStart},i.SetTouchStartToMove=function(){this.posTouchStart.x=this.posTouchMove.x,this.posTouchStart.y=this.posTouchMove.y,this.indexBonusMove++},i.ResetTouchStartInfo=function(){this.isTouchStart=!1,this.indexBonusMove=-1,this.preMoveVecdirection.x=0,this.preMoveVecdirection.y=0},i.IsTouchStart=function(){if(this.isTouchStart)return!0;if(c.instance.IsTouchStart()){var t=this.GetRealPosTouch(c.instance.GetPosTouchStart());if(0==this.IsOutTouchArea(t))return this.isTouchStart=!0,this.posTouchStart.x=t.x,this.posTouchStart.y=t.y,!0}return this.ResetTouchStartInfo(),!1},i.IsTouchEnd=function(){if(0==this.isTouchStart)return!1;if(c.instance.IsTouchEnd())return this.ResetTouchStartInfo(),!0;if(c.instance.IsTouchMove()){var t=this.GetRealPosTouch(c.instance.GetPosTouchMove());if(this.IsOutTouchArea(t))return this.ResetTouchStartInfo(),!0}return!1},i.IsTouchEndOnArea=function(){if(c.instance.IsTouchEnd()){this.ResetTouchStartInfo();var t=this.GetRealPosTouch(c.instance.GetPosTouchEnd());if(0==this.IsOutTouchArea(t))return this.posTouchEnd.x=t.x,this.posTouchEnd.y=t.y,!0}return!1},i.IsTouchMove=function(){if(c.instance.IsTouchMove()){var t=this.GetRealPosTouch(c.instance.GetPosTouchMove());if(0==this.IsOutTouchArea(t))return this.posTouchMove.x=t.x,this.posTouchMove.y=t.y,0==this.isTouchStart&&(this.isTouchStart=!0,this.posTouchStart.x=this.posTouchMove.x,this.posTouchStart.y=this.posTouchMove.y),!0}return this.ResetTouchStartInfo(),!1},i.GetMoveVector=function(){var t=new s(0,0);return t.x=this.posTouchMove.x-this.posTouchStart.x,t.y=this.posTouchMove.y-this.posTouchStart.y,t},i.SetBonusMove=function(t){this.bonusMove=t},i.GetMoveVectorWithBonus=function(){var t=new s(0,0),o=0;this.indexBonusMove>=this.bonusMove.length&&(this.indexBonusMove=this.bonusMove.length-1),this.indexBonusMove>=0&&(o=this.bonusMove[this.indexBonusMove]),t.x=this.posTouchMove.x-this.posTouchStart.x,t.y=this.posTouchMove.y-this.posTouchStart.y;var e=!0;return 0==this.preMoveVecdirection.x&&0==this.preMoveVecdirection.y?e=!0:(this.preMoveVecdirection.x*t.x<0||this.preMoveVecdirection.y*t.y<0)&&(e=!1),e&&(t.x>0&&(t.x+=o),t.x<0&&(t.x-=o),t.y>0&&(t.y+=o),t.y<0&&(t.y-=o)),this.preMoveVecdirection.x=t.x,this.preMoveVecdirection.y=t.y,t},i.IsDoubleTouch=function(){return!(!this.IsTouchStart()||!c.instance.IsDoubleTouch())},i.IsOutTouchArea=function(t){return t.x<-this.touchSize.width/2||t.x>this.touchSize.width/2||(t.y<-this.touchSize.height/2||t.y>this.touchSize.height/2)},i.GetRealPosTouch=function(t){var o=new s(0,0);return o.x=t.x*u.instance.cavansTouchScale.x-this.node.worldPosition.x,o.y=t.y*u.instance.cavansTouchScale.y-this.node.worldPosition.y,o},i.GetPosEnd=function(){return this.posTouchEnd},e}(n))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Rubik.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./rotate-controller.ts","./cube-manager.ts","./Cube.ts"],(function(r){"use strict";var o,e,a,s,p,C,i,O,l;return{setters:[function(r){o=r.createClass},function(r){e=r.cclegacy,a=r._decorator,s=r.randomRange},function(r){p=r.ROTATE_TYPE},function(r){C=r.default},function(r){i=r.CUBE_COLOR_TYPE,O=r.CUBE_COLOR_POSITION,l=r.Cube_Info}],execute:function(){var t,n,u;e._RF.push({},"32043HDAidPTokQ7vY7WWdf","Rubik",void 0);var T=a.ccclass;a.property,r("default",T("Rubik")((u=n=function(){function r(){this.rubikCubeInfo=[],this.saveRubikInfoName="Rubik_N_CubeInfo",this.rubikColorType=[],this.arrayRotateType=[],this.NORMAL_RUBIK_3X3=[{arrColorType:[5,0,2,0,1,0],isInFormula:!1,posi:0,posj:0,posk:0},{arrColorType:[0,0,2,0,1,0],isInFormula:!1,posi:0,posj:0,posk:1},{arrColorType:[0,6,2,0,1,0],isInFormula:!1,posi:0,posj:0,posk:2},{arrColorType:[5,0,2,0,0,0],isInFormula:!1,posi:0,posj:1,posk:0},{arrColorType:[0,0,2,0,0,0],isInFormula:!1,posi:0,posj:1,posk:1},{arrColorType:[0,6,2,0,0,0],isInFormula:!1,posi:0,posj:1,posk:2},{arrColorType:[5,0,2,0,0,3],isInFormula:!1,posi:0,posj:2,posk:0},{arrColorType:[0,0,2,0,0,3],isInFormula:!1,posi:0,posj:2,posk:1},{arrColorType:[0,6,2,0,0,3],isInFormula:!1,posi:0,posj:2,posk:2},{arrColorType:[5,0,0,0,1,0],isInFormula:!1,posi:1,posj:0,posk:0},{arrColorType:[0,0,0,0,1,0],isInFormula:!1,posi:1,posj:0,posk:1},{arrColorType:[0,6,0,0,1,0],isInFormula:!1,posi:1,posj:0,posk:2},{arrColorType:[5,0,0,0,0,0],isInFormula:!1,posi:1,posj:1,posk:0},{arrColorType:[0,6,0,0,0,0],isInFormula:!1,posi:1,posj:1,posk:2},{arrColorType:[5,0,0,0,0,3],isInFormula:!1,posi:1,posj:2,posk:0},{arrColorType:[0,0,0,0,0,3],isInFormula:!1,posi:1,posj:2,posk:1},{arrColorType:[0,6,0,0,0,3],isInFormula:!1,posi:1,posj:2,posk:2},{arrColorType:[5,0,0,4,1,0],isInFormula:!1,posi:2,posj:0,posk:0},{arrColorType:[0,0,0,4,1,0],isInFormula:!1,posi:2,posj:0,posk:1},{arrColorType:[0,6,0,4,1,0],isInFormula:!1,posi:2,posj:0,posk:2},{arrColorType:[5,0,0,4,0,0],isInFormula:!1,posi:2,posj:1,posk:0},{arrColorType:[0,0,0,4,0,0],isInFormula:!1,posi:2,posj:1,posk:1},{arrColorType:[0,6,0,4,0,0],isInFormula:!1,posi:2,posj:1,posk:2},{arrColorType:[5,0,0,4,0,3],isInFormula:!1,posi:2,posj:2,posk:0},{arrColorType:[0,0,0,4,0,3],isInFormula:!1,posi:2,posj:2,posk:1},{arrColorType:[0,6,0,4,0,3],isInFormula:!1,posi:2,posj:2,posk:2}]}var e=r.prototype;return e.Clone=function(r){for(var o=new Array(r.length),e=0;e<r.length;e++){var a=new l;a.posi=r[e].posi,a.posj=r[e].posj,a.posk=r[e].posk,a.arrColorType=[r[e].arrColorType[0],r[e].arrColorType[1],r[e].arrColorType[2],r[e].arrColorType[3],r[e].arrColorType[4],r[e].arrColorType[5]],a.isInFormula=r[e].isInFormula,o[e]=a}return o},e.GetArrayCubeInfo=function(){return this.rubikCubeInfo},e.SetArrayCubeInfo=function(r){this.rubikCubeInfo=r},e.GenerateCubeInfo=function(r){var o=4*r*r-6*r+8;this.rubikCubeInfo=new Array(o);for(var e=0,a=0;a<r;a++)for(var s=0;s<r;s++)for(var p=0;p<r;p++){var C=new l;C.posi=a,C.posj=s,C.posk=p,C.arrColorType=[i.COLOR_NONE,i.COLOR_NONE,i.COLOR_NONE,i.COLOR_NONE,i.COLOR_NONE,i.COLOR_NONE];var t,n,u,T,y,R;n=p==r-1,u=0==a,T=a==r-1,y=0==s,R=s==r-1,(t=0==p)&&(C.arrColorType[O.COLOR_LEFT]=i.COLOR_5),n&&(C.arrColorType[O.COLOR_RIGHT]=i.COLOR_6),u&&(C.arrColorType[O.COLOR_UP]=i.COLOR_2),T&&(C.arrColorType[O.COLOR_DOWN]=i.COLOR_4),y&&(C.arrColorType[O.COLOR_FRONT]=i.COLOR_1),R&&(C.arrColorType[O.COLOR_BACK]=i.COLOR_3),(t||n||u||T||y||R)&&(this.rubikCubeInfo[e]=C,e++)}this.GenerateNewCubies(-1),this.SaveCurrentCubies()},e.SetDefault3x3Cube=function(){this.rubikCubeInfo=this.Clone(this.NORMAL_RUBIK_3X3)},e.SaveCurrentCubies=function(){cc.sys.localStorage.setItem(this.saveRubikInfoName,JSON.stringify(this.rubikCubeInfo))},e.LoadCubies=function(){var r=cc.sys.localStorage.getItem(this.saveRubikInfoName);r&&r.length>0?this.rubikCubeInfo=JSON.parse(r):this.SetDefault3x3Cube()},e.CheckCubiesSolve=function(){var r=(3+Math.sqrt(9+4*(this.rubikCubeInfo.length-8)))/4,o=r*r*r;this.rubikColorType.length!=o&&(this.rubikColorType=new Array(o));for(var e=0;e<this.rubikCubeInfo.length;e++){var a=this.rubikCubeInfo[e].posi*r*r+this.rubikCubeInfo[e].posj*r+this.rubikCubeInfo[e].posk;this.rubikColorType[a]=this.rubikCubeInfo[e].arrColorType}return 0!=this.CheckMatchedFloor(3)&&(0!=this.CheckMatchedFloor(2)&&(0!=this.CheckMatchedFloor(1)&&(this.rubikColorType[0][0]==this.rubikColorType[r*r][0]&&this.rubikColorType[0][0]==this.rubikColorType[2*r*r][0]&&(console.log("----rubik solve---"),!0))))},e.CheckMatchedFloor=function(r){var o=(3+Math.sqrt(9+4*(this.rubikCubeInfo.length-8)))/4,e=(r-1)*o*o,a=r*o*o,s=this.rubikColorType[e],p=this.rubikColorType[a-1];if(s[O.COLOR_DOWN]!=p[O.COLOR_DOWN])return!1;if(s[O.COLOR_UP]!=p[O.COLOR_UP])return!1;for(var C=1;C<o*o-1;C++){var l=this.rubikColorType[C+e];if(l&&6==l.length)for(var t=0;t<6;t++)if(l[t]!=i.COLOR_NONE)if(s[t]!=i.COLOR_NONE){if(l[t]!=s[t])return!1}else if(p[t]!=i.COLOR_NONE&&l[t]!=p[t])return!1}return!0},e.GenerateNewCubies=function(r){r<=0&&(r=Math.floor(s(20,100))),r=5;for(var o=this.arrayRotateType.length,e=0;e<r;e++){var a=Math.floor(s(0,100))%o,p=this.arrayRotateType[a];this.RotateRubik(p)}},e.RotateRubik=function(r){for(var o=0;o<this.rubikCubeInfo.length;o++){var e=this.rubikCubeInfo[o],a=C.instance.GetRubikSize(),s=!1;switch(r){case p.L:case p.La:0==e.posk&&(s=!0);break;case p.R:case p.Ra:e.posk==a-1&&(s=!0);break;case p.U:case p.Ua:0==e.posi&&(s=!0);break;case p.D:case p.Da:e.posi==a-1&&(s=!0);break;case p.M:case p.Ma:0!=e.posk&&e.posk!=a-1&&(s=!0);break;case p.F:case p.Fa:0==e.posj&&(s=!0);break;case p.B:case p.Ba:e.posj==a-1&&(s=!0);break;case p.l:case p.la:e.posk!=a-1&&(s=!0);break;case p.r:case p.ra:0!=e.posk&&(s=!0);break;case p.u:case p.ua:e.posi!=a-1&&(s=!0);break;case p.d:case p.da:0!=e.posi&&(s=!0);break;case p.E:case p.Ea:e.posi!=a-1&&0!=e.posi&&(s=!0);break;case p.f:case p.fa:e.posj!=a-1&&(s=!0);break;case p.S:case p.Sa:e.posj!=a-1&&0!=e.posj&&(s=!0)}if(0!=s){var i=a-1,l=0;switch(r){case p.L:case p.l:case p.M:case p.Ra:case p.ra:l=e.posi,e.posi=i-e.posj,e.posj=l,l=e.arrColorType[O.COLOR_UP],e.arrColorType[O.COLOR_UP]=e.arrColorType[O.COLOR_BACK],e.arrColorType[O.COLOR_BACK]=e.arrColorType[O.COLOR_DOWN],e.arrColorType[O.COLOR_DOWN]=e.arrColorType[O.COLOR_FRONT],e.arrColorType[O.COLOR_FRONT]=l;break;case p.R:case p.r:case p.La:case p.la:case p.Ma:l=e.posj,e.posj=i-e.posi,e.posi=l,l=e.arrColorType[O.COLOR_UP],e.arrColorType[O.COLOR_UP]=e.arrColorType[O.COLOR_FRONT],e.arrColorType[O.COLOR_FRONT]=e.arrColorType[O.COLOR_DOWN],e.arrColorType[O.COLOR_DOWN]=e.arrColorType[O.COLOR_BACK],e.arrColorType[O.COLOR_BACK]=l;break;case p.U:case p.u:case p.Da:case p.da:case p.Ea:l=e.posj,e.posj=i-e.posk,e.posk=l,l=e.arrColorType[O.COLOR_FRONT],e.arrColorType[O.COLOR_FRONT]=e.arrColorType[O.COLOR_RIGHT],e.arrColorType[O.COLOR_RIGHT]=e.arrColorType[O.COLOR_BACK],e.arrColorType[O.COLOR_BACK]=e.arrColorType[O.COLOR_LEFT],e.arrColorType[O.COLOR_LEFT]=l;break;case p.Ua:case p.ua:case p.D:case p.d:case p.E:l=e.posk,e.posk=i-e.posj,e.posj=l,l=e.arrColorType[O.COLOR_FRONT],e.arrColorType[O.COLOR_FRONT]=e.arrColorType[O.COLOR_LEFT],e.arrColorType[O.COLOR_LEFT]=e.arrColorType[O.COLOR_BACK],e.arrColorType[O.COLOR_BACK]=e.arrColorType[O.COLOR_RIGHT],e.arrColorType[O.COLOR_RIGHT]=l;break;case p.F:case p.f:case p.Ba:case p.S:l=e.posk,e.posk=i-e.posi,e.posi=l,l=e.arrColorType[O.COLOR_LEFT],e.arrColorType[O.COLOR_LEFT]=e.arrColorType[O.COLOR_DOWN],e.arrColorType[O.COLOR_DOWN]=e.arrColorType[O.COLOR_RIGHT],e.arrColorType[O.COLOR_RIGHT]=e.arrColorType[O.COLOR_UP],e.arrColorType[O.COLOR_UP]=l;break;case p.Fa:case p.fa:case p.B:case p.Sa:l=e.posi,e.posi=i-e.posk,e.posk=l,l=e.arrColorType[O.COLOR_LEFT],e.arrColorType[O.COLOR_LEFT]=e.arrColorType[O.COLOR_UP],e.arrColorType[O.COLOR_UP]=e.arrColorType[O.COLOR_RIGHT],e.arrColorType[O.COLOR_RIGHT]=e.arrColorType[O.COLOR_DOWN],e.arrColorType[O.COLOR_DOWN]=l}}}},o(r,null,[{key:"instance",get:function(){if(null==r._instance)for(var o in r._instance=new r,p)"NONE"!=o&&"x"!=o&&"xa"!=o&&"y"!=o&&"ya"!=o&&"z"!=o&&"za"!=o&&r._instance.arrayRotateType.push(p[o]);return r._instance}}]),r}(),n._instance=null,t=u))||t);e._RF.pop()}}}));

System.register("chunks:///_virtual/camera-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,a,s,r,n,h,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,n=t.Vec3,h=t.Vec2,l=t.Quat,c=t.Component}],execute:function(){var u,p,x,m,y;s._RF.push({},"362e5llnR1MRr4gkiI6PYdB","camera-controller",void 0);var M=r.ccclass,f=r.property;t("CameraController",(u=M("CameraController"),p=f({type:cc.Node}),u((y=e((m=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"camera3d",y,a(e)),e.touchArea=null,e.rotateController=null,e.posDefault=new n,e.isChangePos=!1,e.minMove=new h(8,8),e.maxMove=new h(20,20),e.maxMoveSprite=new h(30,30),e.defaultCameraQuat=l.IDENTITY,e}o(e,t);var s=e.prototype;return s.start=function(){this.touchArea=this.node.getComponent("TouchArea"),this.rotateController=this.camera3d.getComponent("RotateController"),this.posDefault=this.node.getPosition()},s.update=function(t){if(this.touchArea)if(this.isChangePos&&this.touchArea.IsTouchEnd())this.node.setPosition(this.posDefault),this.isChangePos=!1;else if(this.touchArea.IsDoubleTouch())this.camera3d.setRotation(this.defaultCameraQuat),this.camera3d.children[0].lookAt(new n(0,0,0));else if(this.touchArea.IsTouchMove()){var e=this.touchArea.GetMoveVector();if(Math.abs(e.x)>this.minMove.x||Math.abs(e.y)>this.minMove.y){Math.min(e.x,this.maxMove.x);e.x<0&&Math.max(e.x,-this.maxMove.x);Math.min(e.y,this.maxMove.y);e.y<0&&Math.max(e.y,-this.maxMove.y),this.isChangePos=!0;var o=new h(0,0),i=new n(this.node.position.x,this.node.position.y,this.node.position.z);Math.abs(e.x)>Math.abs(e.y)?(e.x<0?o.y=1:o.y=-1,i.x+=e.x-this.minMove.x,i.x-this.posDefault.x>this.maxMoveSprite.x&&(i.x=this.posDefault.x+this.maxMoveSprite.x),i.x-this.posDefault.x<-this.maxMoveSprite.x&&(i.x=this.posDefault.x-this.maxMoveSprite.x)):(e.y>0?o.x=1:o.x=-1,i.y+=e.y-this.minMove.y,i.y-this.posDefault.y>this.maxMoveSprite.y&&(i.y=this.posDefault.y+this.maxMoveSprite.y),i.y-this.posDefault.y<-this.maxMoveSprite.y&&(i.y=this.posDefault.y-this.maxMoveSprite.y)),this.node.setPosition(i),this.rotateController.RotateAround(new n(o.x,o.y,0),2),this.camera3d.children[0].lookAt(new n(0,0,0))}}},e}(c)).prototype,"camera3d",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=m))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/popup-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ui-canvas.ts","./game-controller.ts"],(function(e){"use strict";var t,n,i,o,p,c,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,o=e._decorator,p=e.Component},function(e){c=e.default},function(e){s=e.default}],execute:function(){var a,u,r;e("POPUP_TYPE",void 0),i._RF.push({},"59151DXGdNNOZQKBr6P6nMc","popup-manager",void 0);var E,l=o.ccclass;o.property;!function(e){e[e.SAVE_EXIT=0]="SAVE_EXIT",e[e.NEW_GAME=1]="NEW_GAME",e[e.FINISHED_GAME=2]="FINISHED_GAME",e[e.FINISHED_GAME_GOT_NEW_SCORE=3]="FINISHED_GAME_GOT_NEW_SCORE"}(E||(E=e("POPUP_TYPE",{})));e("default",l("PopupManager")((r=u=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).ARRAY_POPUP=[{title:"SAVE and Exit",message:""},{title:"NEW GAME",message:""},{title:"CONGRATULATIONS",message:""},{title:"CONGRATULATIONS",message:"New Score"}],t.currentPopupTypeNode=null,t.popupType=E.SAVE_EXIT,t}t(i,e);var o=i.prototype;return o.onLoad=function(){i._instance=this.node.getComponent("PopupManager")},o.start=function(){this.node.active=!1},o.InitPopUp=function(e){var t=this;this.node.active=!0,this.popupType=e;var n=this.ARRAY_POPUP[e];switch(console.log("init pop up: "+n.title),e){case E.SAVE_EXIT:case E.NEW_GAME:this.currentPopupTypeNode=this.node.getChildByName("yesno");break;case E.FINISHED_GAME:case E.FINISHED_GAME_GOT_NEW_SCORE:this.currentPopupTypeNode=this.node.getChildByName("result");var i=this.currentPopupTypeNode.getChildByName("inputname");i&&(i.active=e==E.FINISHED_GAME_GOT_NEW_SCORE)}if(this.node.children.forEach((function(e){e==t.currentPopupTypeNode?e.active=!0:e.active=!1})),this.currentPopupTypeNode){var o=this.currentPopupTypeNode.getChildByName("title").getComponent("cc.RichText");o&&(o.string=n.title);var p=this.currentPopupTypeNode.getChildByName("message").getComponent("cc.Label");p&&(p.string=n.message)}},o.OnButtonCancel=function(){this.node.active=!1,this.popupType==E.SAVE_EXIT&&c.instance.UnselectMenuButton("exit"),this.popupType==E.NEW_GAME&&(c.instance.UnselectMenuButton("play"),s.instance.ContinueGame())},o.OnButtonConfirm=function(){this.popupType==E.SAVE_EXIT?s.instance.SaveAndExitGame():this.popupType==E.NEW_GAME&&(c.instance.UnselectMenuButton("play"),s.instance.StartNewGame()),this.node.active=!1},o.OnButtonOK=function(){if(this.node.active=!1,this.popupType==E.FINISHED_GAME_GOT_NEW_SCORE&&this.currentPopupTypeNode){var e=this.currentPopupTypeNode.getComponentInChildren("cc.EditBox");e&&s.instance.AddNewScore(e.string)}},o.IsActive=function(){return this.node.active},n(i,null,[{key:"instance",get:function(){return i._instance}}]),i}(p),u._instance=null,a=r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/menu-button-item.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.Vec2,s=e.Size,r=e.Component}],execute:function(){var c;i._RF.push({},"76253WKC7VD65HBEdd9VBhq","menu-button-item",void 0);var h=n.ccclass;n.property,e("MenuButtonItem",h("MenuButtonItem")(c=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).normalSize=new o(0,0),t.selectedSize=new o(0,0),t.isSelected=!1,t}t(i,e);var n=i.prototype;return n.start=function(){},n.Init=function(e,t,i,n){this.normalSize.x=t.x,this.normalSize.y=t.y,this.selectedSize.x=i.x,this.selectedSize.y=i.y,this.node.children[0].getComponent("cc.Sprite")._spriteFrame=e,this.SetSelected(n)},n.SetSize=function(e){var t=this.node.children[0].getComponent("cc.UITransform");t.contentSize.width!=e.x&&t.contentSize.height!=e.y&&t.setContentSize(new s(e.x,e.y))},n.SetSelected=function(e){this.isSelected=this.node.name==e,this.isSelected?this.SetSize(this.selectedSize):this.SetSize(this.normalSize)},n.IsTouchOn=function(e){return e.x<this.node.position.x+this.normalSize.x/2&&e.x>this.node.position.x-this.normalSize.x/2&&e.y<this.node.position.y+this.normalSize.y/2&&e.y>this.node.position.y-this.normalSize.y/2},i}(r))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/cube-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./rotate-controller.ts","./global.ts","./Rubik.ts","./Cube.ts","./game-controller.ts","./input-controller.ts"],(function(t){"use strict";var e,n,o,i,a,r,u,s,c,l,h,f,b,C,T,d,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,u=t._decorator,s=t.Node,c=t.Vec3,l=t.Component},function(t){h=t.ROTATE_TYPE},function(t){f=t.default},function(t){b=t.default},function(t){C=t.CUBE_ROTATING_STATUS,T=t.CUBE_COLOR},function(t){d=t.default,p=t.GAME_STATE},function(t){g=t.default}],execute:function(){var R,v,m,N,y,S,x,E,G,k,A;r._RF.push({},"81a37Uk86FMxb/QhON3/b3W","cube-manager",void 0);var M=u.ccclass,O=u.property;t("default",(R=M("CubeManager"),v=O({type:cc.Node}),m=O({type:cc.Node}),N=O(s),R((A=k=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"textMoveCountNode",x,i(e)),o(e,"textTimeNode",E,i(e)),o(e,"canvasNode",G,i(e)),e.RubikSize=3,e.DisplaySize=3,e.isGenerate=!1,e.rotateInput=null,e.isAnyCubeStatus=C.NONE,e.preRotateType=h.NONE,e.richTextMoveCount=null,e.richTextTime=null,e.moveCount=0,e.currentRotateTime=.75,e.targetAngle=90,e.autoRotateAngle=30,e.deltaRotate=5,e}n(e,t);var r=e.prototype;return r.onLoad=function(){e.__instacne=this.node.getComponent("CubeManager")},r.start=function(){this.canvasNode&&(this.rotateInput=this.canvasNode.getComponent("CubeInput")),this.textMoveCountNode&&(this.richTextMoveCount=this.textMoveCountNode.getComponent("cc.RichText")),this.textTimeNode&&(this.richTextTime=this.textTimeNode.getComponent("cc.RichText"))},r.update=function(t){if(this.isGenerate&&(this.UpdateCubiesStatus(),this.rotateInput)){var e=this.rotateInput.PopRotate();e!=h.NONE?this.isAnyCubeStatus!=C.NONE&&0==this.CheckCanRotate(this.preRotateType,e)?console.log("do not rotate when another is rotating "+this.preRotateType+" c "+e):(console.log("rotate cube: "+e),this.RotateCube(e,!0)&&(this.moveCount++,console.log("auto rotate to target")),this.preRotateType=e):g.instance.IsTouchEnd()&&this.RotateCubeBack()}},r.CheckCanRotate=function(t,e){if(t==h.NONE||e==h.NONE)return!0;var n=t.toString(),o=e.toString();return 0==n.indexOf(o)||0==o.indexOf(n)},r.GetRubikSize=function(){return this.RubikSize},r.LoadRubik=function(){this.isGenerate=!1,this.node.removeAllChildren(),b.instance.LoadCubies();var t=b.instance.GetArrayCubeInfo(),e=(3+Math.sqrt(9+4*(t.length-8)))/4;this.RubikSize=e;for(var n=1*e/2,o=0,i=0,a=0,r=0;r<t.length;r++){var u=t[r];o=.5-n+1*u.posk,i=n-.5-1*u.posi,a=n-.5-1*u.posj;var s=cc.instantiate(f.instance.GetPrefab("cube"));s.setPosition(0,0,0),s.name="cube"+(u.posi*e*e+u.posj*e+u.posk),this.node.addChild(s),s.getComponent("Cube").InitCubeInfo(u,new c(o,i,a),this.targetAngle,this.autoRotateAngle,this.deltaRotate)}var l=this.DisplaySize/e;this.node.setScale(l,l,l),this.isGenerate=!0,this.moveCount=0,this.richTextMoveCount&&(this.richTextMoveCount.string="<color=#0000ff>"+this.moveCount+"</color>")},r.GenerateRubik=function(t){this.node.removeAllChildren(),this.RubikSize=t,b.instance.GenerateCubeInfo(t),this.LoadRubik()},r.GetPrefabColor=function(t){switch(d.instance.currentRubikColor[t]){case T.YELLOW:return f.instance.GetPrefab("cubey");case T.ORANGE:return f.instance.GetPrefab("cubeo");case T.BLUE:return f.instance.GetPrefab("cubeb");case T.RED:return f.instance.GetPrefab("cuber");case T.GREEN:return f.instance.GetPrefab("cubeg");case T.WHILE:return f.instance.GetPrefab("cubew")}return f.instance.GetPrefab("cuben")},r.RotateCubeBack=function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].getComponent("Cube").RotateBack()}},r.RotateCube=function(t,e){var n=!1;switch(t){case h.x:case h.xa:case h.y:case h.ya:case h.z:case h.za:for(var o=0;o<this.node.children.length;o++){var i=this.node.children[o].getComponent("Cube");i.SetRotateTime(this.currentRotateTime),t==h.x?(n=i.RotateToTarget(h.la),n=i.RotateToTarget(h.R)):t==h.y?(n=i.RotateToTarget(h.u),n=i.RotateToTarget(h.Da)):t==h.ya?(n=i.RotateToTarget(h.ua),n=i.RotateToTarget(h.D)):t==h.xa?(n=i.RotateToTarget(h.l),n=i.RotateToTarget(h.Ra)):t==h.z?(n=i.RotateToTarget(h.f),n=i.RotateToTarget(h.Ba)):t==h.za&&(n=i.RotateToTarget(h.fa),n=i.RotateToTarget(h.B))}break;default:for(var a=0;a<this.node.children.length;a++){var r=this.node.children[a].getComponent("Cube");r.SetRotateTime(this.currentRotateTime),n=r.RotateToTarget(t)}}e&&(d.instance.GetCurrentState()==p.STATE_AP_RESOLVING&&this.richTextMoveCount&&(this.richTextMoveCount.string="<color=#0000ff>"+this.moveCount+"</color>"),b.instance.CheckCubiesSolve()&&d.instance.FinishedCubies());return n},r.SetTime=function(t,e){this.richTextTime&&(this.richTextTime.string=e?"<color=#00ff00>"+Math.floor(t)+"</color>":"<color=#ff0000>"+Math.floor(100*t)/100+"</color>")},r.GetMoveCount=function(){return this.moveCount},r.SetMoveCount=function(t){this.moveCount=t},r.UpdateCubiesStatus=function(){var t=this;this.isAnyCubeStatus=C.NONE,this.node.children.forEach((function(e){var n=e.getComponent("Cube").GetCubeRotateStatus();n!=C.NONE&&(t.isAnyCubeStatus=n)}))},a(e,null,[{key:"instance",get:function(){return e.__instacne}}]),e}(l),k.__instacne=null,x=e((S=A).prototype,"textMoveCountNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"textTimeNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(S.prototype,"canvasNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/global.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,i=t._decorator}],execute:function(){var r,a,c;e._RF.push({},"bc7f75Yp7RA7ovPd6ScLeAz","global",void 0);var s=i.ccclass;i.property,t("default",s("Global")((c=a=function(){function t(){this.initialized=!1,this.prefabs={}}var e=t.prototype;return e.Init=function(){var t=this;this.initialized||cc.resources.loadDir("Prefabs",(function(n,e){e&&e.forEach((function(n){t.prefabs[n.data._name.toLowerCase()]=n})),t.initialized=!0}))},e.IsLoadres=function(){return this.initialized},e.GetPrefab=function(t){return this.prefabs[t]},n(t,null,[{key:"instance",get:function(){return null==t._instance&&(t._instance=new t),t._instance}}]),t}(),a._instance=null,r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/menu-button-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ui-canvas.ts"],(function(t){"use strict";var e,n,i,r,o,u,a,c,s,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,a=t.Vec2,c=t.Size,s=t.Component},function(t){h=t.default}],execute:function(){var l,m,d,S,f,p,B,b,z,T,g,y,N,v,P,w;t("MENU_BUTTON_TYPE",void 0),o._RF.push({},"cd4b5n/hkJC8LzEKVO9j8ah","menu-button-controller",void 0);var U,I=u.ccclass,_=u.property;!function(t){t[t.SPRITE_BUTTON=0]="SPRITE_BUTTON",t[t.ALG_BUTTON=1]="ALG_BUTTON"}(U||(U=t("MENU_BUTTON_TYPE",{})));t("MenuButtonController",(l=I("MenuButtonController"),m=_(cc.Prefab),d=_({type:cc.Enum(U)}),S=_(cc.SpriteFrame),f=_(cc.Vec2),p=_(cc.Vec2),B=_(cc.boolean),l((T=e((z=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,i(e,"buttonPrefabs",T,r(e)),i(e,"buttonType",g,r(e)),i(e,"arraySpriteButton",y,r(e)),i(e,"normalSize",N,r(e)),i(e,"buttonSpacing",v,r(e)),i(e,"selectedSize",P,r(e)),i(e,"isHorizontal",w,r(e)),e.currentSelectedButtonName="",e.menuBtnSize=new c(0,0),e.touchArea=null,e.touchSelectButtonName="",e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.buttonType==U.SPRITE_BUTTON&&this.GenerateButtonItems();var t=this.node.getComponent("cc.UITransform");t?(this.menuBtnSize.width=t.width,this.menuBtnSize.height=t.height):(this.menuBtnSize.width=h.instance.canvasOriginalSize.width,this.menuBtnSize.height=h.instance.canvasOriginalSize.height),this.touchArea=this.node.getComponent("TouchArea")},o.start=function(){},o.GenerateButtonItems=function(){if(this.buttonPrefabs)for(var t=this.arraySpriteButton.length,e=0;e<t;e++){var n=this.arraySpriteButton[e],i=cc.instantiate(this.buttonPrefabs),r=i.getComponent("MenuButtonItem");i.name=n.name,r&&r.Init(n,this.normalSize,this.selectedSize,this.currentSelectedButtonName),this.node.addChild(i)}},o.GetTouchButtonName=function(){return this.currentSelectedButtonName},o.ResetTouchButtonName=function(){this.currentSelectedButtonName=""},o.UpdateMenuButton=function(){if(this.touchArea&&this.touchArea.IsTouchStart()&&this.touchArea.IsTouchEndOnArea())for(var t=this.touchArea.GetPosEnd(),e=0;e<this.node.children.length;e++){var n=this.node.children[e];if(n.name!=this.currentSelectedButtonName){var i=n.getComponent("MenuButtonItem");i&&i.IsTouchOn(t)&&(this.currentSelectedButtonName=n.name,this.UpdateButtonPosition())}}},o.UpdateButtonPosition=function(){var t=new a(0,0),e=this.GetNumberActiveButton(),n=(e-1)*(this.normalSize.x+this.buttonSpacing)+this.selectedSize.x;0==this.isHorizontal&&(n=(e-1)*(this.normalSize.y+this.buttonSpacing)+this.selectedSize.y),t.x=-n/2,0==this.isHorizontal&&(t.y=Math.min(n/2,this.menuBtnSize.height/2));for(var i=0,r="",o=0;o<this.node.children.length;o++){var u=this.node.children[o];if(0!=u.active){var c=0,s=this.normalSize.x,h=this.selectedSize.x;0==this.isHorizontal&&(s=this.normalSize.y,h=this.selectedSize.y),0==i?u.name===this.currentSelectedButtonName?c+=h/2:c+=s/2:(c+=this.buttonSpacing,r==this.currentSelectedButtonName||u.name==this.currentSelectedButtonName?(c+=h/2,c+=s/2):c+=s),this.isHorizontal?t.x+=c:t.y-=c,u.setPosition(t.x,t.y,0);var l=u.getComponent("MenuButtonItem");l&&l.SetSelected(this.currentSelectedButtonName),r=u.name,i++}}},o.UnselectCurrentButton=function(){""!=this.currentSelectedButtonName?(this.currentSelectedButtonName="",this.UpdateButtonPosition()):this.currentSelectedButtonName=""},o.GetCurrentSelectedButtonName=function(){return this.currentSelectedButtonName},o.HideShowButton=function(t,e){this.node.children.forEach((function(n){n.name==t&&(n.active=e)}))},o.GetNumberActiveButton=function(){var t=0;return this.node.children.forEach((function(e){e.active&&t++})),t},e}(s)).prototype,"buttonPrefabs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(z.prototype,"buttonType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.SPRITE_BUTTON}}),y=e(z.prototype,"arraySpriteButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(z.prototype,"normalSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(50,50)}}),v=e(z.prototype,"buttonSpacing",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),P=e(z.prototype,"selectedSize",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a(85,85)}}),w=e(z.prototype,"isHorizontal",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=z))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/input-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./game-controller.ts"],(function(t){"use strict";var o,e,n,i,c,h,s,u,r,T;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,i=t._decorator,c=t.Vec2,h=t.systemEvent,s=t.SystemEventType,u=t.macro,r=t.Component},function(t){T=t.default}],execute:function(){var a,d,l;n._RF.push({},"dfe8fhSsftEu5rjOUoMW3fv","input-controller",void 0);var f=i.ccclass;i.property,t("default",f("InputController")((l=d=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).posTouchStart=new c,o.posTouchMove=new c,o.posTouchEnd=new c,o.isTouchMove=!1,o.isTouchEnd=!0,o.isTouchStart=!1,o.arraykeyCode={},o.timeDoubleTap=.35,o.timePreTouchStart=0,o.timeCurrentTouchStart=0,o.arrayDeltaTimeTouch=[],o.indextDeltaTimeTouch=-1,o}o(n,t);var i=n.prototype;return i.onLoad=function(){n._instance=this.node.getComponent("InputController")},i.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),h.on(s.KEY_DOWN,this.onKeyDown,this)},i.update=function(t){},i.lateUpdate=function(){for(var t in this.arraykeyCode)this.arraykeyCode[t]=!1},i.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),h.off(s.KEY_DOWN,this.onKeyDown,this)},i.onKeyDown=function(t){switch(console.log("keydown: "+t.keyCode),t.keyCode){case u.KEY.back:case u.KEY.backspace:this.arraykeyCode[""+t.keyCode]=!0}},i.IsKeyCodeDown=function(t){return 1==this.arraykeyCode[""+t]},i.onTouchStart=function(t){var o=t.getLocation();this.timePreTouchStart=this.timeCurrentTouchStart,this.timeCurrentTouchStart=T.instance.GetCurrentTime(),this.isTouchStart=!0,this.isTouchEnd=!1,this.posTouchStart=o},i.onTouchEnd=function(t){var o=t.getLocation();this.isTouchMove=!1,this.isTouchEnd=!0,this.isTouchStart=!1,this.posTouchEnd=o,this.indextDeltaTimeTouch=-1},i.onTouchMove=function(t){var o=t.getLocation();this.posTouchMove=o,this.isTouchEnd=!1,this.isTouchMove=!0},i.IsTouchStart=function(){return this.isTouchStart},i.IsTouchEnd=function(){return this.isTouchEnd},i.IsTouchMove=function(){return this.isTouchMove},i.GetMoveVector=function(){var t=new c(0,0);return(this.isTouchMove||this.isTouchEnd)&&(t.x=this.posTouchMove.x-this.posTouchStart.x,t.y=this.posTouchMove.y-this.posTouchStart.y),t},i.IsDoubleTouch=function(){return this.timeCurrentTouchStart!=this.timePreTouchStart&&this.timeCurrentTouchStart-this.timePreTouchStart<this.timeDoubleTap},i.GetPosTouchStart=function(){return this.posTouchStart},i.GetPosTouchMove=function(){return this.posTouchMove},i.GetPosTouchEnd=function(){return this.posTouchEnd},i.SetTouchStartToMove=function(){this.posTouchStart.x=this.posTouchMove.x,this.posTouchStart.y=this.posTouchMove.y},i.SetDeltaTimeTouch=function(t){this.arrayDeltaTimeTouch=t},i.IsTouchOnDeltaTime=function(){if(0==this.isTouchStart)return!1;if(this.indextDeltaTimeTouch<0)return this.indextDeltaTimeTouch=0,console.log("input first touch"),!0;var t=T.instance.GetCurrentTime()-this.timeCurrentTouchStart;return t>this.arrayDeltaTimeTouch[this.indextDeltaTimeTouch]&&(console.log("input touch : "+this.indextDeltaTimeTouch+" deltatime: "+t),this.indextDeltaTimeTouch++,!0)},e(n,null,[{key:"instance",get:function(){return n._instance}}]),n}(r),d._instance=null,a=l))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/rotate-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,i,s,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator,s=t.Vec3,o=t.Quat,r=t.Component}],execute:function(){var n;t("ROTATE_TYPE",void 0),a._RF.push({},"e3177sKDvRKe55pheeHXC3q","rotate-controller",void 0);var h,c=i.ccclass;i.property;!function(t){t.NONE="",t.x="x",t.xa="x'",t.y="y",t.ya="y'",t.z="z",t.za="z'",t.U="U",t.Ua="U'",t.u="u",t.ua="u'",t.D="D",t.Da="D'",t.d="d",t.da="d'",t.R="R",t.Ra="R'",t.r="r",t.ra="r'",t.L="L",t.La="L'",t.l="l",t.la="l'",t.B="B",t.Ba="B'",t.b="b",t.ba="b'",t.F="F",t.Fa="F'",t.f="f",t.fa="f'",t.M="M",t.Ma="M'",t.E="E",t.Ea="E'",t.S="S",t.Sa="S'"}(h||(h=t("ROTATE_TYPE",{})));t("default",c("RotateController")(n=function(t){function a(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).timeRotateStart=0,e.isRotateToTarget=!1,e.isRotateBack=!1,e.timeRotate=0,e.rorateAxis=new s,e.preRorateAxis=new s(0,0,0),e.targetAngle=0,e.rotatedAngle=0,e.deltaRotateAngle=0,e.autoRotateAngle=-1,e.targetQuat=new o,e.beginQuat=null,e.isReachTarget=!1,e}e(a,t);var i=a.prototype;return i.start=function(){this.timeRotateStart=0},i.update=function(t){if(this.IsAutoRotating()){if(this.timeRotateStart>=this.timeRotate)this.isRotateToTarget&&(this.isRotateToTarget=!1,this.isReachTarget=!0,this.node.setRotation(this.targetQuat),this.beginQuat=null),this.isRotateBack&&(this.isRotateBack=!1,this.node.setRotation(this.beginQuat),this.beginQuat=null),this.rotatedAngle=0;else if(this.timeRotate>0){var e=this.targetAngle/this.timeRotate*t,a=new o;o.fromAxisAngle(a,this.rorateAxis,e*(Math.PI/180));var i=new o,s=new o;this.node.getRotation(i),o.multiply(s,a,i),this.node.setRotation(s)}this.timeRotateStart+=t}},i.Init=function(t,e,a){this.targetAngle=t,this.autoRotateAngle=e,this.deltaRotateAngle=a},i.IsReachTarget=function(){return this.isReachTarget},i.SetTargetAngle=function(t){this.targetAngle=t},i.DoRotate=function(t){if(this.IsAutoRotating())return!1;var e=null;switch(this.isReachTarget=!1,t){case h.x:case h.Ma:case h.R:case h.r:case h.La:case h.la:e=new s(-1,0,0);break;case h.xa:case h.M:case h.Ra:case h.ra:case h.L:case h.l:e=new s(1,0,0);break;case h.y:case h.U:case h.u:case h.Da:case h.da:case h.Ea:e=new s(0,-1,0);break;case h.ya:case h.Ua:case h.ua:case h.D:case h.d:case h.E:e=new s(0,1,0);break;case h.F:case h.f:case h.Ba:case h.S:e=new s(0,0,-1);break;case h.Fa:case h.fa:case h.B:case h.Sa:e=new s(0,0,1)}if(null==this.beginQuat){this.beginQuat=new o;var a=new o;if(o.fromAxisAngle(a,e,this.targetAngle*(Math.PI/180)),this.node.getRotation(this.beginQuat),o.multiply(this.targetQuat,a,this.beginQuat),0==this.timeRotate)return this.isRotateToTarget=!1,this.node.setRotation(this.targetQuat),this.isReachTarget=!0,!0}return this.RotateAround(e,this.deltaRotateAngle)},i.SetTimeRotate=function(t){this.timeRotate=t},i.ReSetRotatedAngle=function(){this.rotatedAngle=0},i.RotateAround=function(t,e){if(this.IsAutoRotating())return!1;s.copy(this.rorateAxis,t);var a=new o;this.node.getRotation(a);var i=new o,r=new o;return o.fromAxisAngle(i,t,e*(Math.PI/180)),o.multiply(r,i,a),this.node.setRotation(r),0!=this.rotatedAngle?s.equals(this.rorateAxis,this.preRorateAxis)?this.rotatedAngle+=e:this.rotatedAngle-=e:this.rotatedAngle+=e,this.preRorateAxis.equals(s.ZERO)&&s.copy(this.preRorateAxis,this.rorateAxis),this.targetAngle>0&&Math.abs(this.rotatedAngle)>this.autoRotateAngle&&this.RotateToTarget(),!0},i.RotateToTarget=function(){this.isRotateToTarget=!0,this.timeRotateStart=Math.abs(this.rotatedAngle)*this.timeRotate/this.targetAngle,s.copy(this.preRorateAxis,s.ZERO)},i.RotateBack=function(){if(this.isRotateBack=!0,this.timeRotateStart=(this.targetAngle-Math.abs(this.rotatedAngle))*this.timeRotate/this.targetAngle,this.rotatedAngle>0){var t=s.clone(this.preRorateAxis);this.rorateAxis=t.multiplyScalar(-1)}s.copy(this.preRorateAxis,s.ZERO)},i.IsAutoRotating=function(){return!(!this.isRotateToTarget&&!this.isRotateBack)},i.IsRotatingToTarget=function(){return this.isRotateToTarget},a}(r))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/Cube.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./rotate-controller.ts","./global.ts","./cube-manager.ts"],(function(e){"use strict";var t,o,a,s,r,n,O,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,a=e._decorator,s=e.Vec3,r=e.Node,n=e.Component},function(e){O=e.ROTATE_TYPE},function(e){i=e.default},function(e){c=e.default}],execute:function(){var C;e({CUBE_COLOR:void 0,CUBE_COLOR_POSITION:void 0,CUBE_COLOR_TYPE:void 0,CUBE_ROTATING_STATUS:void 0,CUBE_TYPE:void 0}),o._RF.push({},"e6043S8S0pP2I0Tiwi1sSmz","Cube",void 0);var u,R,l,h,T,b=a.ccclass;a.property;!function(e){e[e.CENTER=0]="CENTER",e[e.CORNER=1]="CORNER",e[e.EDGE=2]="EDGE",e[e.NONE=3]="NONE"}(u||(u=e("CUBE_TYPE",{}))),function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.YELLOW=2]="YELLOW",e[e.ORANGE=3]="ORANGE",e[e.WHILE=4]="WHILE",e[e.BLUE=5]="BLUE",e[e.GREEN=6]="GREEN"}(R||(R=e("CUBE_COLOR",{}))),function(e){e[e.COLOR_NONE=0]="COLOR_NONE",e[e.COLOR_1=1]="COLOR_1",e[e.COLOR_2=2]="COLOR_2",e[e.COLOR_3=3]="COLOR_3",e[e.COLOR_4=4]="COLOR_4",e[e.COLOR_5=5]="COLOR_5",e[e.COLOR_6=6]="COLOR_6"}(l||(l=e("CUBE_COLOR_TYPE",{}))),function(e){e[e.COLOR_LEFT=0]="COLOR_LEFT",e[e.COLOR_RIGHT=1]="COLOR_RIGHT",e[e.COLOR_UP=2]="COLOR_UP",e[e.COLOR_DOWN=3]="COLOR_DOWN",e[e.COLOR_FRONT=4]="COLOR_FRONT",e[e.COLOR_BACK=5]="COLOR_BACK"}(h||(h=e("CUBE_COLOR_POSITION",{}))),function(e){e[e.NONE=0]="NONE",e[e.ROTATING=1]="ROTATING",e[e.ROTATE_BACK=2]="ROTATE_BACK",e[e.ROTATE_TARGET=3]="ROTATE_TARGET"}(T||(T=e("CUBE_ROTATING_STATUS",{})));e("Cube_Info",(function(){this.arrColorType=[],this.isInFormula=!1,this.posi=0,this.posj=0,this.posk=0})),e("default",b("Cube")(C=function(e){function o(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).scalerate=.025,t.normalScale=1-t.scalerate,t.SCALE_L=new s(t.scalerate,t.normalScale,t.normalScale),t.SCALE_R=new s(t.scalerate,t.normalScale,t.normalScale),t.SCALE_U=new s(t.normalScale,t.scalerate,t.normalScale),t.SCALE_D=new s(t.normalScale,t.scalerate,t.normalScale),t.SCALE_F=new s(t.normalScale,t.normalScale,t.scalerate),t.SCALE_B=new s(t.normalScale,t.normalScale,t.scalerate),t.POS_L=new s(-(.5-t.scalerate/2),0,0),t.POS_R=new s(.5-t.scalerate/2,0,0),t.POS_U=new s(0,.5-t.scalerate/2,0),t.POS_D=new s(0,-(.5-t.scalerate/2),0),t.POS_F=new s(0,0,.5-t.scalerate/2),t.POS_B=new s(0,0,-(.5-t.scalerate/2)),t.cubeType=u.NONE,t.cubeInfo=null,t.nodeCube=null,t.currentRotateType=O.NONE,t.rotateStatus=T.NONE,t.rotateController=null,t}t(o,e);var a=o.prototype;return a.start=function(){null==this.rotateController&&(this.rotateController=this.node.getComponent("RotateController"))},a.update=function(e){switch(this.rotateStatus){case T.ROTATE_TARGET:this.UpdateCubeInfo(this.currentRotateType),this.currentRotateType=O.NONE,0==this.rotateController.IsAutoRotating()&&(this.rotateStatus=T.NONE);break;case T.ROTATE_BACK:0==this.rotateController.IsAutoRotating()&&(this.rotateStatus=T.NONE)}},a.InitCubeInfo=function(e,t,o,a,s){null==this.rotateController&&(this.rotateController=this.node.getComponent("RotateController")),this.rotateController.Init(o,a,s),this.cubeInfo=e;var n=i.instance.GetPrefab("cuben"),O=cc.instantiate(n);O.setScale(this.normalScale,this.normalScale,this.normalScale),this.nodeCube=new r,this.nodeCube.addChild(O),this.nodeCube.setPosition(t),this.AddCubeColor(this.cubeInfo.arrColorType),this.node.addChild(this.nodeCube)},a.AddCubeColor=function(e){var t=null,o=0;if(e[h.COLOR_LEFT]!=l.COLOR_NONE){var a=c.instance.GetPrefabColor(e[h.COLOR_LEFT]);t=cc.instantiate(a),this.nodeCube.addChild(t),t.setScale(this.SCALE_L),t.setPosition(this.POS_L),o++}if(e[h.COLOR_RIGHT]!=l.COLOR_NONE){var s=c.instance.GetPrefabColor(e[h.COLOR_RIGHT]);t=cc.instantiate(s),this.nodeCube.addChild(t),t.setScale(this.SCALE_R),t.setPosition(this.POS_R),o++}if(e[h.COLOR_UP]!=l.COLOR_NONE){var r=c.instance.GetPrefabColor(e[h.COLOR_UP]);t=cc.instantiate(r),this.nodeCube.addChild(t),t.setScale(this.SCALE_U),t.setPosition(this.POS_U),o++}if(e[h.COLOR_DOWN]!=l.COLOR_NONE){var n=c.instance.GetPrefabColor(e[h.COLOR_DOWN]);t=cc.instantiate(n),this.nodeCube.addChild(t),t.setScale(this.SCALE_D),t.setPosition(this.POS_D),o++}if(e[h.COLOR_FRONT]!=l.COLOR_NONE){var O=c.instance.GetPrefabColor(e[h.COLOR_FRONT]);t=cc.instantiate(O),this.nodeCube.addChild(t),t.setScale(this.SCALE_F),t.setPosition(this.POS_F),o++}if(e[h.COLOR_BACK]!=l.COLOR_NONE){var i=c.instance.GetPrefabColor(e[h.COLOR_BACK]);t=cc.instantiate(i),this.nodeCube.addChild(t),t.setScale(this.SCALE_B),t.setPosition(this.POS_B),o++}this.cubeType=3==o?u.CORNER:2==o?u.EDGE:u.CENTER},a.IsAutoRotating=function(){return this.rotateStatus==T.ROTATE_BACK||this.rotateStatus==T.ROTATE_TARGET},a.GetCubeRotateStatus=function(){return this.rotateStatus},a.SetRotateTime=function(e){this.rotateController.SetTimeRotate(e)},a.RotateBack=function(){this.rotateStatus==T.ROTATING&&(this.rotateController.RotateBack(),this.rotateStatus=T.ROTATE_BACK)},a.RotateToTarget=function(e){var t=c.instance.GetRubikSize(),o=!1;switch(e){case O.L:case O.La:0==this.cubeInfo.posk&&(o=!0);break;case O.R:case O.Ra:this.cubeInfo.posk==t-1&&(o=!0);break;case O.U:case O.Ua:0==this.cubeInfo.posi&&(o=!0);break;case O.D:case O.Da:this.cubeInfo.posi==t-1&&(o=!0);break;case O.M:case O.Ma:0!=this.cubeInfo.posk&&this.cubeInfo.posk!=t-1&&(o=!0);break;case O.F:case O.Fa:0==this.cubeInfo.posj&&(o=!0);break;case O.B:case O.Ba:this.cubeInfo.posj==t-1&&(o=!0);break;case O.l:case O.la:this.cubeInfo.posk!=t-1&&(o=!0);break;case O.r:case O.ra:0!=this.cubeInfo.posk&&(o=!0);break;case O.u:case O.ua:this.cubeInfo.posi!=t-1&&(o=!0);break;case O.d:case O.da:0!=this.cubeInfo.posi&&(o=!0);break;case O.E:case O.Ea:this.cubeInfo.posi!=t-1&&0!=this.cubeInfo.posi&&(o=!0);break;case O.f:case O.fa:this.cubeInfo.posj!=t-1&&(o=!0);break;case O.S:case O.Sa:this.cubeInfo.posj!=t-1&&0!=this.cubeInfo.posj&&(o=!0)}if(0==o)return!1;if(this.rotateController.DoRotate(e)){if(this.currentRotateType=e,this.rotateController.IsRotatingToTarget())return this.rotateStatus=T.ROTATE_TARGET,!0;this.rotateStatus=T.ROTATING}return!1},a.UpdateCubeInfo=function(e){if(e!=O.NONE){var t=c.instance.GetRubikSize()-1,o=0;switch(e){case O.L:case O.l:case O.M:case O.Ra:case O.ra:o=this.cubeInfo.posi,this.cubeInfo.posi=t-this.cubeInfo.posj,this.cubeInfo.posj=o,o=this.cubeInfo.arrColorType[h.COLOR_UP],this.cubeInfo.arrColorType[h.COLOR_UP]=this.cubeInfo.arrColorType[h.COLOR_BACK],this.cubeInfo.arrColorType[h.COLOR_BACK]=this.cubeInfo.arrColorType[h.COLOR_DOWN],this.cubeInfo.arrColorType[h.COLOR_DOWN]=this.cubeInfo.arrColorType[h.COLOR_FRONT],this.cubeInfo.arrColorType[h.COLOR_FRONT]=o;break;case O.R:case O.r:case O.La:case O.la:case O.Ma:o=this.cubeInfo.posj,this.cubeInfo.posj=t-this.cubeInfo.posi,this.cubeInfo.posi=o,o=this.cubeInfo.arrColorType[h.COLOR_UP],this.cubeInfo.arrColorType[h.COLOR_UP]=this.cubeInfo.arrColorType[h.COLOR_FRONT],this.cubeInfo.arrColorType[h.COLOR_FRONT]=this.cubeInfo.arrColorType[h.COLOR_DOWN],this.cubeInfo.arrColorType[h.COLOR_DOWN]=this.cubeInfo.arrColorType[h.COLOR_BACK],this.cubeInfo.arrColorType[h.COLOR_BACK]=o;break;case O.U:case O.u:case O.Da:case O.da:case O.Ea:o=this.cubeInfo.posj,this.cubeInfo.posj=t-this.cubeInfo.posk,this.cubeInfo.posk=o,o=this.cubeInfo.arrColorType[h.COLOR_FRONT],this.cubeInfo.arrColorType[h.COLOR_FRONT]=this.cubeInfo.arrColorType[h.COLOR_RIGHT],this.cubeInfo.arrColorType[h.COLOR_RIGHT]=this.cubeInfo.arrColorType[h.COLOR_BACK],this.cubeInfo.arrColorType[h.COLOR_BACK]=this.cubeInfo.arrColorType[h.COLOR_LEFT],this.cubeInfo.arrColorType[h.COLOR_LEFT]=o;break;case O.Ua:case O.ua:case O.D:case O.d:case O.E:o=this.cubeInfo.posk,this.cubeInfo.posk=t-this.cubeInfo.posj,this.cubeInfo.posj=o,o=this.cubeInfo.arrColorType[h.COLOR_FRONT],this.cubeInfo.arrColorType[h.COLOR_FRONT]=this.cubeInfo.arrColorType[h.COLOR_LEFT],this.cubeInfo.arrColorType[h.COLOR_LEFT]=this.cubeInfo.arrColorType[h.COLOR_BACK],this.cubeInfo.arrColorType[h.COLOR_BACK]=this.cubeInfo.arrColorType[h.COLOR_RIGHT],this.cubeInfo.arrColorType[h.COLOR_RIGHT]=o;break;case O.F:case O.f:case O.Ba:case O.S:o=this.cubeInfo.posk,this.cubeInfo.posk=t-this.cubeInfo.posi,this.cubeInfo.posi=o,o=this.cubeInfo.arrColorType[h.COLOR_LEFT],this.cubeInfo.arrColorType[h.COLOR_LEFT]=this.cubeInfo.arrColorType[h.COLOR_DOWN],this.cubeInfo.arrColorType[h.COLOR_DOWN]=this.cubeInfo.arrColorType[h.COLOR_RIGHT],this.cubeInfo.arrColorType[h.COLOR_RIGHT]=this.cubeInfo.arrColorType[h.COLOR_UP],this.cubeInfo.arrColorType[h.COLOR_UP]=o;break;case O.Fa:case O.fa:case O.B:case O.Sa:o=this.cubeInfo.posi,this.cubeInfo.posi=t-this.cubeInfo.posk,this.cubeInfo.posk=o,o=this.cubeInfo.arrColorType[h.COLOR_LEFT],this.cubeInfo.arrColorType[h.COLOR_LEFT]=this.cubeInfo.arrColorType[h.COLOR_UP],this.cubeInfo.arrColorType[h.COLOR_UP]=this.cubeInfo.arrColorType[h.COLOR_RIGHT],this.cubeInfo.arrColorType[h.COLOR_RIGHT]=this.cubeInfo.arrColorType[h.COLOR_DOWN],this.cubeInfo.arrColorType[h.COLOR_DOWN]=o}}},a.GetCubeInfo=function(){return this.cubeInfo},o}(n))||C);o._RF.pop()}}}));

System.register("chunks:///_virtual/game-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./score-manager.ts","./global.ts","./Rubik.ts","./cube-manager.ts","./Cube.ts","./popup-manager.ts","./input-controller.ts"],(function(e){"use strict";var t,n,a,i,s,r,c,u,o,S,m,T,A,E,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){a=e.cclegacy,i=e._decorator,s=e.macro,r=e.Component},function(e){c=e.default,u=e.ScoreInfo},function(e){o=e.default},function(e){S=e.default},function(e){m=e.default},function(e){T=e.CUBE_COLOR},function(e){A=e.default,E=e.POPUP_TYPE},function(e){h=e.default}],execute:function(){var _,G,l;e("GAME_STATE",void 0),a._RF.push({},"ee6ccT8emJA17BOvUrVuQva","game-controller",void 0);var f,N=i.ccclass;i.property;!function(e){e[e.STATE_NONE=0]="STATE_NONE",e[e.STATE_LOADING=1]="STATE_LOADING",e[e.STATE_AP_OBSERVING=2]="STATE_AP_OBSERVING",e[e.STATE_AP_RESOLVING=3]="STATE_AP_RESOLVING",e[e.STATE_AP_FINISHED=4]="STATE_AP_FINISHED",e[e.STATE_AP_PAUSE=5]="STATE_AP_PAUSE"}(f||(f=e("GAME_STATE",{})));var p=e("GameStatus",(function(){this.isFinished=!0,this.currentMoveCount=0,this.currentTime=0}));e("default",N("GameController")((l=G=function(e){function a(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).saveGameStatusName="Rubik_N_GameStatus",t.currentState=f.STATE_NONE,t.preGameState=f.STATE_NONE,t.isFinishedGame=!1,t.gameApTime=0,t.isGamePause=!1,t.timeTotal=0,t.currentRubikColor=[T.NONE,T.RED,T.YELLOW,T.ORANGE,T.WHILE,T.BLUE,T.GREEN],t}t(a,e);var i=a.prototype;return i.onLoad=function(){a._instance=this.node.getComponent("GameController"),o.instance.Init()},i.start=function(){a._instance.LoadGameStatus()},i.update=function(e){switch(this.timeTotal+=e,(h.instance.IsKeyCodeDown(s.KEY.back)||h.instance.IsKeyCodeDown(s.KEY.backspace))&&(this.PauseGame(),A.instance.InitPopUp(E.SAVE_EXIT)),this.currentState){case f.STATE_AP_OBSERVING:this.gameApTime-=e,this.gameApTime<=0&&(this.gameApTime=0,this.currentState=f.STATE_AP_RESOLVING,this.isFinishedGame=!1),m.instance.SetTime(this.gameApTime,!0);break;case f.STATE_AP_RESOLVING:this.gameApTime+=e,m.instance.SetTime(this.gameApTime,!1);break;case f.STATE_AP_FINISHED:0==A.instance.IsActive()&&(this.currentState=f.STATE_AP_PAUSE)}},i.LoadGameStatus=function(){var e=cc.sys.localStorage.getItem(this.saveGameStatusName);if(e&&e.length>0){var t=JSON.parse(e);this.isFinishedGame=t.isFinished,this.gameApTime=t.currentTime,m.instance.SetMoveCount(t.currentMoveCount)}else this.isFinishedGame=!0;this.currentState=f.STATE_AP_PAUSE},i.SaveGameStatus=function(){var e=new p;e.isFinished=this.isFinishedGame,e.currentTime=this.gameApTime,e.currentMoveCount=m.instance.GetMoveCount(),cc.sys.localStorage.setItem(this.saveGameStatusName,JSON.stringify(e)),S.instance.SaveCurrentCubies()},i.GetCurrentTime=function(){return this.timeTotal},i.SaveAndExitGame=function(){this.SaveGameStatus(),cc.game.end()},i.StartNewGame=function(){this.gameApTime=12,this.isFinishedGame=!0,this.currentState=f.STATE_AP_OBSERVING,m.instance.GenerateRubik(3)},i.ContinueGame=function(){0==m.instance.isGenerate?(console.log("continue play game from saved data"),this.currentState=f.STATE_AP_RESOLVING,m.instance.LoadRubik()):console.log("cancel start new game")},i.ResumeGame=function(){this.isGamePause&&(this.currentState=this.preGameState,this.isGamePause=!1)},i.PauseGame=function(){return(this.currentState==f.STATE_AP_OBSERVING||this.currentState==f.STATE_AP_RESOLVING)&&(console.log("pause game"),this.preGameState=this.currentState,this.currentState=f.STATE_AP_PAUSE,this.isGamePause=!0,!0)},i.IsGamePause=function(){return this.isGamePause},i.IsGameFinished=function(){return this.isFinishedGame},i.GetCurrentState=function(){return this.currentState},i.FinishedCubies=function(){this.currentState=f.STATE_AP_FINISHED;var e=c.instance.IsNewScore(this.gameApTime);A.instance.InitPopUp(e?E.FINISHED_GAME_GOT_NEW_SCORE:E.FINISHED_GAME),this.isFinishedGame=!0,this.SaveGameStatus()},i.AddNewScore=function(e){var t=new u;t.moveCount=m.instance.GetMoveCount(),t.timeResolve=Math.floor(100*this.gameApTime)/100,t.playerName=""==e?"PlayerName":e,c.instance.AddNewScore(t)},n(a,null,[{key:"instance",get:function(){return a._instance}}]),a}(r),G._instance=null,_=l))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/cube-input.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./rotate-controller.ts","./game-controller.ts"],(function(t){"use strict";var e,o,h,i,r,u,c,a,s,n,p,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,h=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.Node,a=t.Vec2,s=t.Component},function(t){n=t.ROTATE_TYPE},function(t){p=t.default,A=t.GAME_STATE}],execute:function(){var S,l,b,T,x,d,y,v,f,I,R;r._RF.push({},"f889eTb8udPX6PxCuq8nndA","cube-input",void 0);var M=u.ccclass,m=u.property;t("CubeInput",(S=M("CubeInput"),l=m(c),b=m(c),T=m(c),x=m(c),S((v=e((y=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,h(e,"touchCubeNode",v,i(e)),h(e,"touchBottomNode",f,i(e)),h(e,"touchRightNode",I,i(e)),h(e,"touchTopNode",R,i(e)),e.minMove=new a(50,40),e.bonusMove=[20,35,50],e.touchAreaCubeScript=null,e.touchAreaBottomScript=null,e.touchAreaRightScript=null,e.touchAreaTopScript=null,e.touchAreaTop=new a,e.touchAreabottom=new a,e.touchAreaRight=new a,e.touhcAreaLeft=new a,e.touchAreaCenterHorizontal=new a,e.touchAreaCenterVertical=new a,e.rotateQueue=[],e.maxRotateQueue=10,e.currentIndex=-1,e}o(e,t);var r=e.prototype;return r.start=function(){this.rotateQueue=new Array(this.maxRotateQueue),this.currentIndex=-1,this.touchCubeNode&&(this.touchAreaCubeScript=this.touchCubeNode.getComponent("TouchArea"),this.touchAreaCubeScript.SetBonusMove(this.bonusMove)),this.touchBottomNode&&(this.touchAreaBottomScript=this.touchBottomNode.getComponent("TouchArea"),this.touchAreaBottomScript.SetBonusMove(this.bonusMove)),this.touchRightNode&&(this.touchAreaRightScript=this.touchRightNode.getComponent("TouchArea"),this.touchAreaRightScript.SetBonusMove(this.bonusMove)),this.touchTopNode&&(this.touchAreaTopScript=this.touchTopNode.getComponent("TouchArea"),this.touchAreaTopScript.SetBonusMove(this.bonusMove)),this.UpdateCubeTouchSize()},r.update=function(t){if(this.touchAreaCubeScript&&this.touchAreaCubeScript.IsTouchStart()&&this.touchAreaCubeScript.IsTouchMove()){var e=this.touchAreaCubeScript.GetPosTouchStart(),o=this.touchAreaCubeScript.GetMoveVectorWithBonus(),h=this.touchAreaCubeScript.IsDoubleTouch();if(Math.abs(o.x)>this.minMove.x||Math.abs(o.y)>this.minMove.y){var i=n.NONE;Math.abs(o.x)>Math.abs(o.y)?this.IsInArea(e.y,this.touchAreaTop)?i=h?o.x>0?n.ua:n.u:o.x>0?n.Ua:n.U:this.IsInArea(e.y,this.touchAreaCenterHorizontal)?i=h?o.x>0?n.f:n.fa:o.x>0?n.F:n.Fa:this.IsInArea(e.y,this.touchAreabottom)&&(i=h?o.x>0?n.d:n.da:o.x>0?n.D:n.Da):this.IsInArea(e.x,this.touhcAreaLeft)?i=h?o.y>0?n.la:n.l:o.y>0?n.La:n.L:this.IsInArea(e.x,this.touchAreaCenterVertical)?i=h?o.y>0?n.Ba:n.B:o.y>0?n.Ma:n.M:this.IsInArea(e.x,this.touchAreaRight)&&(i=h?o.y>0?n.r:n.ra:o.y>0?n.R:n.Ra),this.PushRotate(i),this.touchAreaCubeScript.SetTouchStartToMove()}}if(this.touchAreaTopScript&&this.touchAreaTopScript.IsTouchStart()&&this.touchAreaTopScript.IsTouchMove()){var r=this.touchAreaTopScript.GetMoveVectorWithBonus(),u=this.touchAreaTopScript.IsDoubleTouch();Math.abs(r.x)>this.minMove.x&&(r.x>0?u?this.PushRotate(n.S):this.PushRotate(n.z):u?this.PushRotate(n.Sa):this.PushRotate(n.za),this.touchAreaTopScript.SetTouchStartToMove())}if(this.touchAreaBottomScript&&this.touchAreaBottomScript.IsTouchStart()&&this.touchAreaBottomScript.IsTouchMove()){var c=this.touchAreaBottomScript.GetMoveVectorWithBonus(),a=this.touchAreaBottomScript.IsDoubleTouch();Math.abs(c.x)>this.minMove.x&&(c.x>0?a?this.PushRotate(n.E):this.PushRotate(n.ya):a?this.PushRotate(n.Ea):this.PushRotate(n.y),this.touchAreaBottomScript.SetTouchStartToMove())}if(this.touchAreaRightScript&&this.touchAreaRightScript.IsTouchStart()&&this.touchAreaRightScript.IsTouchMove()){var s=this.touchAreaRightScript.GetMoveVectorWithBonus();Math.abs(s.y)>this.minMove.y&&(s.y>0?this.PushRotate(n.x):this.PushRotate(n.xa),this.touchAreaRightScript.SetTouchStartToMove())}},r.UpdateCubeTouchSize=function(){if(this.touchAreaCubeScript){var t=this.touchAreaCubeScript.touchSize,e=new a(0,0);this.touchAreaTop.x=e.y+t.height/6,this.touchAreaTop.y=e.y+t.height/2,this.touchAreaCenterHorizontal.x=e.y-t.height/6,this.touchAreaCenterHorizontal.y=e.y+t.height/6,this.touchAreabottom.x=e.y-t.height/2,this.touchAreabottom.y=e.y-t.height/6,this.touchAreaRight.x=e.x+t.width/6,this.touchAreaRight.y=e.x+t.width/2,this.touchAreaCenterVertical.x=e.x-t.width/6,this.touchAreaCenterVertical.y=e.x+t.width/6,this.touhcAreaLeft.x=e.x-t.width/2,this.touhcAreaLeft.y=e.x-t.width/6}},r.PushRotate=function(t){p.instance.GetCurrentState()!=A.STATE_AP_OBSERVING&&p.instance.GetCurrentState()!=A.STATE_AP_RESOLVING||(this.currentIndex<this.maxRotateQueue-1&&this.currentIndex++,this.currentIndex<0&&(this.currentIndex=0),this.rotateQueue[this.currentIndex]=t)},r.PopRotate=function(){if(this.currentIndex>=0){for(var t=this.rotateQueue[0],e=0;e<this.currentIndex;e++)this.rotateQueue[e]=this.rotateQueue[e+1];return this.currentIndex--,t}return n.NONE},r.IsInArea=function(t,e){return t>e.x&&t<e.y},r.SetSensitivity=function(t){},e}(s)).prototype,"touchCubeNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(y.prototype,"touchBottomNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(y.prototype,"touchRightNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(y.prototype,"touchTopNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-canvas.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./rotate-controller.ts","./global.ts","./cube-manager.ts","./popup-manager.ts","./game-controller.ts"],(function(e){"use strict";var t,n,i,o,a,c,s,r,u,h,l,d,S,p,v,g,f,m,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,s=e._decorator,r=e.Label,u=e.Node,h=e.Size,l=e.Vec3,d=e.SystemEventType,S=e.Component},function(e){p=e.ROTATE_TYPE},function(e){v=e.default},function(e){g=e.default},function(e){f=e.default,m=e.POPUP_TYPE},function(e){N=e.default}],execute:function(){var z,b,B,w,y,C,T,A,U,_,E,P,R,x,I,G,L,O,H;c._RF.push({},"fb722vQ185E7pYLR03jpZfs","ui-canvas",void 0);var M=s.ccclass,D=s.property;e("default",(z=M("UiCanvas"),b=D({type:r}),B=D(u),w=D([u]),y=D([u]),C=D([u]),T=D([u]),A=D([u]),z((H=O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"debugscreenSizeLabel",E,o(t)),i(t,"menuButtons",P,o(t)),i(t,"apNode",R,o(t)),i(t,"bestScoreNode",x,o(t)),i(t,"algNode",I,o(t)),i(t,"scanNode",G,o(t)),i(t,"settingsNode",L,o(t)),t.canvasOriginalSize=new h(480,800),t.canvasCurrentScale=new l(1,1,1),t.cavasTouchScreenSize=new h(0,0),t.cavansTouchScale=new h(1,1),t.menuButoncontroller=null,t}n(t,e);var c=t.prototype;return c.onLoad=function(){t._instance=this.node.getComponent("UiCanvas"),this.cavasTouchScreenSize.width=this.canvasOriginalSize.width,this.cavasTouchScreenSize.height=this.cavasTouchScreenSize.height,this.node.on(d.TRANSFORM_CHANGED,this.onWindowSizeChange,this)},c.start=function(){this.menuButtons&&(this.menuButoncontroller=this.menuButtons.getComponent("MenuButtonController"),this.menuButoncontroller.HideShowButton("pause",!1),this.menuButoncontroller.UpdateButtonPosition()),this.SetActiveNode(this.apNode,!0),this.SetActiveNode(this.bestScoreNode,!1),this.SetActiveNode(this.settingsNode,!1),this.SetActiveNode(this.scanNode,!1),this.SetActiveNode(this.algNode,!1)},c.onDestroy=function(){this.node.on(d.TRANSFORM_CHANGED,this.onWindowSizeChange,this)},c.update=function(e){if(0!=v.instance.IsLoadres()&&this.menuButoncontroller&&0==f.instance.IsActive()){this.menuButoncontroller.UpdateMenuButton();var t=this.menuButoncontroller.GetTouchButtonName();""!=t&&(console.log("menu button clicked: "+t),this.SetActiveNode(this.apNode,!1),this.SetActiveNode(this.bestScoreNode,!1),this.SetActiveNode(this.settingsNode,!1),this.SetActiveNode(this.scanNode,!1),this.SetActiveNode(this.algNode,!1),"play"==t?(this.SetActiveNode(this.apNode,!0),0==N.instance.IsGameFinished()?f.instance.InitPopUp(m.NEW_GAME):N.instance.StartNewGame()):(N.instance.PauseGame()&&(this.menuButoncontroller.HideShowButton("pause",!0),this.menuButoncontroller.HideShowButton("play",!1),this.menuButoncontroller.UpdateButtonPosition()),"exit"==t?this.ShowExitPopUp():"alg"==t?this.SetActiveNode(this.algNode,!0):"pause"==t?(N.instance.ResumeGame(),this.menuButoncontroller.HideShowButton("pause",!1),this.menuButoncontroller.HideShowButton("play",!0),this.menuButoncontroller.UpdateButtonPosition(),this.SetActiveNode(this.apNode,!0)):"scoreboard"==t?this.SetActiveNode(this.bestScoreNode,!0):"settings"==t&&this.SetActiveNode(this.settingsNode,!0)),this.menuButoncontroller.ResetTouchButtonName())}},c.onWindowSizeChange=function(){var e=this.node.getComponent("cc.Canvas").cameraComponent,t=e.camera._device.width,n=e.camera._device.height;console.log("on window change: "+t+" - "+n),this.cavasTouchScreenSize.width=t,this.cavasTouchScreenSize.height=n,this.UpdateSize()},c.UpdateSize=function(){var e=this.node.getChildByName("UI"),t=this.node.getComponent("cc.UITransform");this.canvasCurrentScale.x=t.contentSize.width/this.canvasOriginalSize.width,this.canvasCurrentScale.y=t.contentSize.height/this.canvasOriginalSize.height,this.cavansTouchScale.x=t.contentSize.width/this.cavasTouchScreenSize.width,this.cavansTouchScale.y=t.contentSize.height/this.cavasTouchScreenSize.height,e.setScale(new l(this.canvasCurrentScale.x,this.canvasCurrentScale.y,this.canvasCurrentScale.z)),this.debugscreenSizeLabel;for(var n=0;n<e.children.length;n++)this.UpdateTouchSize(e.children[n]);var i=this.node.getComponent("CubeInput");i&&i.UpdateCubeTouchSize()},c.UpdateTouchSize=function(e){var t=this;if(0!=e.children.length){var n=e.getComponent("TouchArea");n&&n.UpdateTouchSize(this.canvasCurrentScale),e.children.forEach((function(e){t.UpdateTouchSize(e)}))}},c.OnButtonRotate=function(e,t){var n=p.x;"xa"==t?n=p.xa:"y"==t?n=p.y:"ya"==t?n=p.ya:"z"==t?n=p.z:"za"==t&&(n=p.za),g.instance.RotateCube(n,!0)},c.ShowExitPopUp=function(){f.instance.InitPopUp(m.SAVE_EXIT)},c.SetActiveNode=function(e,t){e.forEach((function(e){e.active=t}))},c.UnselectMenuButton=function(e){this.menuButoncontroller.GetCurrentSelectedButtonName()==e&&this.menuButoncontroller.UnselectCurrentButton()},a(t,null,[{key:"instance",get:function(){return t._instance}}]),t}(S),O._instance=null,E=t((_=H).prototype,"debugscreenSizeLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(_.prototype,"menuButtons",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(_.prototype,"apNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(_.prototype,"bestScoreNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(_.prototype,"algNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(_.prototype,"scanNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(_.prototype,"settingsNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=_))||U));c._RF.pop()}}}));

System.register("chunks:///_virtual/debug-touchsize.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Component}],execute:function(){var s;o._RF.push({},"fe75e1Vn39Ckp6yupnlAoZC","debug-touchsize",void 0);var c=n.ccclass;n.property,t("DebugTouchsize",c("DebugTouchsize")(s=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.onLoad=function(){this.labelPosition=this.node.getComponentInChildren("cc.Label")},n.start=function(){},n.updateTouchDebug=function(t){var e=this.node.getChildByName("left");e&&(e.getComponent("cc.UITransform").setContentSize(2,t.height),e.setPosition(-t.width/2+1,0,0)),(e=this.node.getChildByName("right"))&&(e.getComponent("cc.UITransform").setContentSize(2,t.height),e.setPosition(t.width/2-1,0,0)),(e=this.node.getChildByName("top"))&&(e.getComponent("cc.UITransform").setContentSize(t.width,2),e.setPosition(0,t.height/2-1,0)),(e=this.node.getChildByName("bot"))&&(e.getComponent("cc.UITransform").setContentSize(t.width,2),e.setPosition(0,-t.height/2+1,0))},n.SetText=function(t){this.labelPosition.string=t},o}(i))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./score-manager.ts","./rotate-controller.ts","./global.ts","./Rubik.ts","./cube-manager.ts","./Cube.ts","./ui-canvas.ts","./popup-manager.ts","./game-controller.ts","./input-controller.ts","./touch-area.ts","./camera-controller.ts","./menu-button-item.ts","./menu-button-controller.ts","./cube-input.ts","./debug-touchsize.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});